import 'dart:convert';

void day7() {
  final cache = <(int, int)>{};
  final beams = <(int, int)>[];
  final lines = LineSplitter().convert(_input);
  for (int i = 0; i < lines.first.length; i++) {
    if (lines.first[i] == 'S') {
      beams.add((1, i));
      break;
    }
  }

  final visited = <(int, int)>{};
  int timelines = 0;

  while (beams.isNotEmpty) {
    final beam = beams.removeLast();
    if (visited.contains(beam)) {
      timelines++;
      continue;
    }
    int i = beam.$1;
    int j = beam.$2;

    while (i < lines.length) {
      if (lines[i][j] == '^') {
        if (j - 1 >= 0) {
          beams.add((i, j - 1));
        }
        if (j + 1 < lines[i].length) {
          beams.add((i, j + 1));
        }
        cache.add((i, j));
        break;
      }
      i++;
    }

    visited.add(beam);
  }
  print("day 7: ${cache.length}");
}

final _testInput = """.......S.......
...............
.......^.......
...............
......^.^......
...............
.....^.^.^.....
...............
....^.^...^....
...............
...^.^...^.^...
...............
..^...^.....^..
...............
.^.^.^.^.^...^.
...............""";

final _input =
    """......................................................................S......................................................................
.............................................................................................................................................
......................................................................^......................................................................
.............................................................................................................................................
.....................................................................^.^.....................................................................
.............................................................................................................................................
....................................................................^.^.^....................................................................
.............................................................................................................................................
...................................................................^.^.^.^...................................................................
.............................................................................................................................................
..................................................................^.^.^.^.^..................................................................
.............................................................................................................................................
.................................................................^.^...^.^.^.................................................................
.............................................................................................................................................
................................................................^...^...^.^.^................................................................
.............................................................................................................................................
...............................................................^.^...^.^.^...^...............................................................
.............................................................................................................................................
..............................................................^.^.^.^.^.....^.^..............................................................
.............................................................................................................................................
.............................................................^.....^.^.^.^...^.^.............................................................
.............................................................................................................................................
............................................................^.^.^...^.^.^.^.^.^.^............................................................
.............................................................................................................................................
...........................................................^...^.^.^.^...^...^...^...........................................................
.............................................................................................................................................
..........................................................^.^.^.^.^.^.....^.^.^...^..........................................................
.............................................................................................................................................
.........................................................^...^.^.......^...^.......^.........................................................
.............................................................................................................................................
........................................................^.^...^.^.^.^.^.....^...^.^.^........................................................
.............................................................................................................................................
.......................................................^...^...^...^.^...^.^.^.^...^.^.......................................................
.............................................................................................................................................
......................................................^.^.^.^.^...^.^.^...^.^.^.^.^...^......................................................
.............................................................................................................................................
.....................................................^.^.^.^.....^...^.........^.^...^.^.....................................................
.............................................................................................................................................
....................................................^.^.^.^.^.^.^.^.^...^.^.^.....^...^.^....................................................
.............................................................................................................................................
...................................................^...^.^...^.^...^.^.^.^.^...^.^.^.^.^.^...................................................
.............................................................................................................................................
..................................................^.....^.^.^...^.^.....^.^...^.^.^.^.^.^.^..................................................
.............................................................................................................................................
.................................................^.^.^...^.....^...^...^.^.^.^.^.^.^.^.^...^.................................................
.............................................................................................................................................
................................................^.^...^...^.^...^.^.^...^.^.....^...^.....^.^................................................
.............................................................................................................................................
...............................................^.^.^...^.^.....^...^...^...^.^...^.^.^.......^...............................................
.............................................................................................................................................
..............................................^...^.^...^.......^.^.^.^.^.^.^.^.^...^...^.....^..............................................
.............................................................................................................................................
.............................................^...^.^.....^.......^.^.^.^.^.^...^.^.^.^.....^...^.............................................
.............................................................................................................................................
............................................^.^.^.........^.^.....^.^.^.^.^...^.^.^.^.^...^.....^............................................
.............................................................................................................................................
...........................................^.^.^.^...^.....^.^.^.^.^...^...^.^.....^...^...^.^.^.^...........................................
.............................................................................................................................................
..........................................^.....^.^.^.^.^.^...^.....^.^.....^...^...^.^.^.^.^...^.^..........................................
.............................................................................................................................................
.........................................^.^...^.^.....^.^...^.^.^.^.^.^.^.^.^.^...^.....^.....^.^.^.........................................
.............................................................................................................................................
........................................^.....^.^.^.^.^.^.^...^...^.^.^.^.......^.^.^.^.^.^.^.^.^.^.^........................................
.............................................................................................................................................
.......................................^.^.^.^.^.^.^.^...^.^...^.^.^.^...^...^.....^.^.^...^.^...^.^.^.......................................
.............................................................................................................................................
......................................^.......^.^.........^...^.............^.^.^.^...^.^.^.^.^.^.^.^.^......................................
.............................................................................................................................................
.....................................^.^.^...^.^.^.^.....^.^.^...^.^.^.^.....^.^.^.^...^.......^.^...^.^.....................................
.............................................................................................................................................
....................................^...^.^...^.^.^...^.....^...^.......^.^.......^...^...^.^.^.^...^...^....................................
.............................................................................................................................................
...................................^.^.^.^.^.......^.^...^.^...^.^...^.^...^...^.^.^...^.^.^.^.^.^.^.^.^.^...................................
.............................................................................................................................................
..................................^.........^.^.^.^.^...^.^.^...^.^.^...^.^.^.^...^...^.^.^.....^...^.^.^.^..................................
.............................................................................................................................................
.................................^.^.^...^...^.^.....^.^.^.^...^.^.^.^.^.^.^...^...^.^.^...^.^.^.^...^.^.^.^.................................
.............................................................................................................................................
................................^.^.....^...^.....^...^.^...^.^.^.^...^...^.^.^.^.^.^...^.^.^.^.^.^.^...^.^.^................................
.............................................................................................................................................
...............................^...^.^...^.^.^...^...^.^.^.^.^.^...^.^.^.^...^.^.^.^.^...^...^...^.^.^.....^.^...............................
.............................................................................................................................................
..............................^.^.....^.^.^.^.....^.^.^.....^.^.^.^.^.^.......^...^.^.^.^.^...^.^.^.^.^.^.^.^.^..............................
.............................................................................................................................................
.............................^.^.....^...^.^.^.......^.^...^.^.^...^...^.^...^...^.^...^.^.^.^.^.^.^.^...^.^...^.............................
.............................................................................................................................................
............................^.....^.^...^.^.^.......^.^.^.^.......^.^.^.^.^.^.^...^.^.^.^...^...^.......^.^.^.^.^............................
.............................................................................................................................................
...........................^.^.^...^...^.^.^.^...^.^.^.^.^.....^...^...^.....^...^.^.^.^.^.........^.^.....^.^.^.^...........................
.............................................................................................................................................
..........................^.^...^.^...^.^.^.^.......^.^.^.^.^...^.^.....^.^.^.....^.....^...^.......^.^.^.^.^.....^..........................
.............................................................................................................................................
.........................^.^.^.^.....^.^...^.^.^.^.^.^.^.^...^.^.^.....^.^.^...^.^...^.^...^...^...^...^.^.^.^...^.^.........................
.............................................................................................................................................
........................^.^.^...^.^.^.^...^.....^...^.^.^.^.^.^...^.....^.^.^.^.^.^...^...^.^...........^...^...^...^........................
.............................................................................................................................................
.......................^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.......^.^.^.^.^.^...^...^...^.^.^.^.^.......^.^.^.^.^.^.^.......................
.............................................................................................................................................
......................^.......^.^.^.^...^.^...^.^...^.^...^.^.^.^.^...^.^.^...^...^.^...^...^.^.^.^.^.^.^.^.^.....^.^.^......................
.............................................................................................................................................
.....................^...^.....^.^.....^.^.^.^...^.^.^.....^.....^.^.^...^...^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.....................
.............................................................................................................................................
....................^...^...^.^.^.^...^.^...^.^.^.^...^...^.^.^.^...^.^.^.^.^...^.^.......^.^.^.^...^...^.....^.^.....^.^....................
.............................................................................................................................................
...................^...^.^.^.^...^...^.^.....^...^.^.^.^.^.^.^.^.^.^.....^.^...^.....^...^.^...^.^...^.^.^.^.^...^.^...^.^...................
.............................................................................................................................................
..................^.^.....^...^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^.^.^.....^.^.^.^...^.^...^.^.^.^.^..................
.............................................................................................................................................
.................^.^...^.^.^.^.^.^.^.^.^...^.^.....^.....^.^.^.^...^.^.^.^...^...^...^.^.^.^.^.^.^.......^.....^.^.....^...^.................
.............................................................................................................................................
................^.^.^.........^...^.^...^.^.^.^.^.^...^...^...^.^.^...^.^.......^.^.^...^...^.^.^.^.^.^...^...^.....^.^.....^................
.............................................................................................................................................
...............^.^.......^.^.^.^...^.^.^...^.^...^.^.^.^...^.....^.^.....^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^...^.^...^.^.....^.^...............
.............................................................................................................................................
..............^.^.^.^...^.....^.^.^.^.^.^...^...^.^.^.^...^.^.....^.^...^.....^.^...^...^...^.^.^...^.^.....^...^.^.^.^.^.^.^.^..............
.............................................................................................................................................
.............^.^.^.^.^.^.^.^.^.....^...^...^...^.......^.^.^...^...^...^.^...^...^.....^.^.......^.^.....^...^...^.....^.^.^.^.^.............
.............................................................................................................................................
............^.^.......^.....^.^.^.^.^.^.^.^.^.^.....^.^.^...^.^.^.^.^.^...^.......^.^.^...^...^...^...........^.^.^.^...^...^.^.^............
.............................................................................................................................................
...........^...^.^.....^.^.^.^.^.^...^.....^...^...^.^.^.^.^.^...^.^.^.^.^.^.^...^.....^.^.^.....^...^.^.^.^.....^.^.^.^.......^.^...........
.............................................................................................................................................
..........^.^...^...^.^.^.^.^.^.....^.........^...^.^.^.^.^.^...^.^.^.........^.^.^.^.^...^...^.^.^.^.^...^.^.^.^...^.^.^.^.^...^.^..........
.............................................................................................................................................
.........^.^.^...^.......^.^.^.^.^.....^...^.^...^...^.^...^...^...^.^.^.^.^.^.^.^.^.^.^.....^...^.^.^.....^...^.^.^.^.....^...^.^.^.........
.............................................................................................................................................
........^.^...^.^.^.^...^...^.....^...^.^.^.....^.^...^.^.^.^.^...^.....^...^.^...^.^.....^.....^.^.^.^...^.^.....^.^.^.....^.^.^.^.^........
.............................................................................................................................................
.......^.^.^.^.....^.........^...^.........^.^.....^.^.^.^.^.^.....^.^.^...^.^...^.^.^.^.^.^.....^.^.^.^.^.^...^.......^.^...^.^.^.^.^.......
.............................................................................................................................................
......^.^.^.....^.^.^.^.^.^...^.^.....^.^.^.^.^...^...^.^.........^.^...^.^.^.^.^.^.^.^.......^.^.^.^.....^...^...^...^...^.^.....^...^......
.............................................................................................................................................
.....^.^.....^.^.^.^.^.^.^.^.....^.^...^.^.^...^.....^...^.^.^.^.^.^...^.............^.^.^...^.^.....^.^.....^.^.....^.^.^.^.^.^.....^.^.....
.............................................................................................................................................
....^.^.^.^.^...^.^...^.......^.^.^.^.^...^.^.^...^.^.^.^.^.^.^.^...^.^.^.^.^...^.^.^.^.^.^...^...^.....^.^.^...^.^...^.^.^...^.^...^.^.^....
.............................................................................................................................................
...^.^.^.^.^.^.....^...^...^.^...^...^.^...^.^...^.^.^.^.......^...^.^.^...^...^.^.^...^.^.^.^...^...^.^.^...^.^.^.^.^.^.^.^.^...^...^.^.^...
.............................................................................................................................................
..^.^.^...^.^.........^.^...^.^.^.^.^.......^.^.....^...^.....^...^...^...^.....^.^.^.....^...^.....^.......^.^.^...^.^.....^.^.....^.^.^.^..
.............................................................................................................................................
.^.^.^.^.^...^...^...^.^...^.^...^.^.^.^.....^.^.^.^.....^.^...^.^.^.^.^.^.^...........^.^.^.^.......^.^.^.^.^...^.^.^.^.^.^.^.^.....^.^...^.
.............................................................................................................................................
""";
